ngx_addon_name=ngx_http_rate_limit_module

RATE_LIMIT_SRCS="                                                               \
                $ngx_addon_dir/src/ngx_http_rate_limit_module.c                 \
                $ngx_addon_dir/src/ngx_http_rate_limit_handler.c                \
                $ngx_addon_dir/src/ngx_http_rate_limit_util.c                   \
                "

RATE_LIMIT_DEPS="                                                               \
                $ngx_addon_dir/src/ngx_http_rate_limit_module.h                 \
                $ngx_addon_dir/src/ngx_http_rate_limit_handler.h                \
                $ngx_addon_dir/src/ngx_http_rate_limit_util.h                   \
                "

if [ -n "$ngx_module_link" ]; then
    # nginx-1.9.11+
    ngx_module_type=HTTP
    ngx_module_name=$ngx_addon_name
    ngx_module_srcs="$RATE_LIMIT_SRCS"
    ngx_module_deps="$RATE_LIMIT_DEPS"

    . auto/module
else
    HTTP_MODULES="$HTTP_MODULES $ngx_addon_name"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS $RATE_LIMIT_SRCS"
    NGX_ADDON_DEPS="$NGX_ADDON_DEPS $RATE_LIMIT_DEPS"
fi
